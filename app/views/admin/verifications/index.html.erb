<h2><%= t("admin.verifications.index.title") %></h2>

<%= form_for(User.new, url: search_admin_verifications_path, as: :user, method: :get) do |f| %>
  <div class="row">
    <div class="small-12 medium-6 column">
      <%= text_field_tag :name_or_email, "", placeholder: t("admin.verifications.index.search_placeholder") %>
    </div>
    <div class="form-inline small-12 medium-6 column">
      <%= f.submit t("admin.verifications.index.search"), class: "button radius success" %>
    </div>
  </div>
<% end %>

<h3><%= page_entries_info @users %></h3>

<ul class="admin-list">
<% @users.each do |user| %>
  <li id="<%= dom_id(user) %>">
    <%= link_to user.name, admin_user_path(user) %>
    <% if !user.residence_verified? %>
      <%= render partial: 'failed_census_call', collection: user.failed_census_calls %>
    <% elsif !user.verification_sms_sent? %>
      <div>
        <%= t("admin.verifications.index.phone_not_given") %>
      </div>
    <% elsif !user.sms_verified? %>
      <div>
        <%= user.unconfirmed_phone %>
      </div>
      <div>
        <%= t("admin.verifications.index.sms_code_not_confirmed") %>
      </div>
    <% end %>
  </li>
<% end %>
</ul>

<%= paginate @users %>