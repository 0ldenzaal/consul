<div class="small-12 medium-12 columns">
  <h4 class='advanced-search-title'><%= t("shared.advanced_search.title") %></h4>
</div>

<%= form_tag search_path, method: :get do %>
  <div id='advanced-search'>

    <div class="small-12 medium-12 advanced-search columns">
      <h5 class='search-option inline-block'><%= t("shared.advanced_search.general") %></h5>
      <%= text_field_tag "search", @search_terms,
                         placeholder: t("shared.advanced_search.general_placeholder") %>
    </div>

    <div class="small-12 medium-6 advanced-search columns">
      <h5 class='search-option inline-block'><%= t("shared.advanced_search.author") %></h5>
      <%= text_field_tag "advanced_search[author]", @params_author,
                         placeholder: t("shared.advanced_search.author_placeholder") %>
    </div>

    <div class="small-12 medium-6 advanced-search columns">
      <h5 class='search-option'><%= t("shared.advanced_search.author_type") %></h5>
      <%= select_tag('advanced_search[official_level]', official_level_options,
                    include_blank: t("shared.advanced_search.author_type_blank")) %>
    </div>

    <div class="small-12 advanced-search columns">
      <h5 class='search-option'><%= t("shared.advanced_search.date") %></h5>
      <%= select_tag('advanced_search[date_min]', date_range_options,
                    include_blank: 'Elige una fecha') %>

      <div class='customized-date inline-block'>
        &nbsp;&nbsp;
        <%= t("shared.advanced_search.from") %>:
        <div class='inline-block'>
          <%= date_field 'advanced_search', 'date_min', max: Date.today, value: @params_date_min %>
        </div>
        &nbsp;&nbsp;
        <%= t("shared.advanced_search.to") %>:
        <div class='inline-block'>
          <%= date_field 'advanced_search', 'date_max', max: Date.today, value: @params_date_max %>
        </div>
      </div>
    </div>


    <div class="small-6 medium-3 offset advanced-search columns">
      <%= submit_tag t("shared.advanced_search.search"), class: 'button postfix' %>
    </div>

  </div>

<% end %>

<hr>

<script type="text/javascript">

//open advantage options menu

var open = <%= raw @advanced_search_present.to_json.html_safe %>;

if(!open) $('#advanced-search').hide();

$('.advanced-search-title').on({
  click: function(){
    $('#advanced-search').slideToggle();
  },
  mouseenter:  function(){
    $(this).addClass('blue');
  },
  mouseleave:  function(){
    $(this).removeClass('blue');
  }
});

//hide customized-date if it is not selected

if($('#advanced_search_date_min').val() != 'custom'){
  $('.customized-date').hide();
  $('.customized-date input').prop('disabled', true);
}

$('#advanced_search_date_min').on('change',function(e){
  var next = $(e.target).next();
  if($(this).val() == 'custom'){
    next.show();
    $('.customized-date input').prop('disabled', false);
  }
  else{
    next.hide();
  }

});

</script>
